# BIP-84

> ğŸ“– ì›ë¬¸: [BIP-0084](https://github.com/bitcoin/bips/blob/master/bip-0084.mediawiki)

<pre>
BIP: 84
ë ˆì´ì–´: ì• í”Œë¦¬ì¼€ì´ì…˜
ì œëª©: P2WPKH ê¸°ë°˜ ê³„ì •ì˜ íŒŒìƒ ì²´ê³„
ì‘ì„±ì: íŒŒë³¼ ë£¨ìŠ¤ë‚™(Pavol Rusnak, stick@satoshilabs.com)
ì˜ê²¬ ìš”ì•½: ì˜ê²¬ ì—†ìŒ
ì˜ê²¬ ì£¼ì†Œ: https://github.com/bitcoin/bips/wiki/Comments:BIP-0084
ìƒíƒœ: ì™„ê²°ë¨
ìœ í˜•: ì •ë³´ ì œê³µ
ìƒì„±ì¼: 2017ë…„ 12ì›” 28ì¼
ë¼ì´ì„ ìŠ¤: CC0-1.0
</pre>

<br>

---

### ëª©ì°¨

- [ì´ˆë¡](#ì´ˆë¡)
- [ë™ê¸°](#ë™ê¸°)
  - [ê³ ë ¤ì‚¬í•­](#ê³ ë ¤ì‚¬í•­)
- [ëª…ì„¸](#ëª…ì„¸)
  - [ê³µê°œ í‚¤ ë„ì¶œ](#ê³µê°œ-í‚¤-ë„ì¶œ)
  - [ê³„ì • íŒŒìƒ](#ê³„ì •-íŒŒìƒ)
  - [í™•ì¥ í‚¤ ë²„ì „](#í™•ì¥-í‚¤-ë²„ì „)
- [ì´ì „ ë²„ì „ê³¼ì˜ í˜¸í™˜ì„±](#ì´ì „-ë²„ì „ê³¼ì˜-í˜¸í™˜ì„±)
- [í…ŒìŠ¤íŠ¸ ë²¡í„°](#í…ŒìŠ¤íŠ¸-ë²¡í„°)
- [ì°¸ê³ ìë£Œ](#ì°¸ê³ ìë£Œ)

---

<br>

## ì´ˆë¡

ì´ BIPëŠ” ì„¸ê·¸ìœ— íŠ¸ëœì­ì…˜ì— *P2WPKH*([BIP-173](https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki)) ì§ë ¬í™” í˜•ì‹ì„ ì‚¬ìš©í•˜ëŠ” HD ì§€ê°‘ì˜ íŒŒìƒ ì²´ê³„ì— ëŒ€í•´ ì •ì˜í•œë‹¤.

<br>

> **ğŸ’¡ P2WPKH**<br><br>
> P2WPKH(Pay-to-witness-public-key-hash)ëŠ” ë¹„íŠ¸ì½”ì¸ì˜ ì„¸ê·¸ìœ—(segregated witness) ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì£¼ì†Œë¥¼ ìƒì„±í•˜ëŠ” ê¸°ìˆ ì´ë‹¤. P2WPKH ì£¼ì†ŒëŠ” ë¹„íŠ¸ì½”ì¸ íŠ¸ëœì­ì…˜ ì¶œë ¥ì— ëŒ€í•œ í•´ì‹œëœ ê³µê°œí‚¤ì˜ ì„¸ê·¸ìœ— ë²„ì „ì„ í¬í•¨í•˜ë©°, ì´ë¥¼ í†µí•´ ìˆ˜ì‹ ìëŠ” ë¹„íŠ¸ì½”ì¸ì„ ë°›ì„ ìˆ˜ ìˆë‹¤. ì´ ê³µê°œí‚¤ëŠ” ë¹„íŠ¸ì½”ì¸ ì£¼ì†Œë¡œ ì••ì¶•ëœ í›„ í•´ì‹œê°’ì´ ê³„ì‚°ë˜ì–´ P2WPKH ì£¼ì†Œê°€ ìƒì„±ëœë‹¤. ë˜í•œ, P2WPKH ì£¼ì†ŒëŠ” P2PKH ì£¼ì†Œë³´ë‹¤ ë” ì‘ì€ í¬ê¸°ì˜ íŠ¸ëœì­ì…˜ì„ ìƒì„±í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë¹„íŠ¸ì½”ì¸ ë„¤íŠ¸ì›Œí¬ìƒ ì²˜ë¦¬ëŸ‰ì„ ë†’ì´ê±°ë‚˜ ìˆ˜ìˆ˜ë£Œ ì ˆì•½ì— ë„ì›€ì´ ëœë‹¤.

<br>

## ë™ê¸°

P2WPKH íŠ¸ëœì­ì…˜ì„ ì‚¬ìš©í•˜ë ¤ë©´ ê³µí†µ íŒŒìƒ ì²´ê³„ê°€ í•„ìš”í•˜ë‹¤. ì´ë¥¼ í†µí•´ ì‚¬ìš©ìëŠ” ë™ì¼í•œ ë§ˆìŠ¤í„° ì‹œë“œ ë°/ë˜ëŠ” ë‹¨ì¼ ê³„ì •ìœ¼ë¡œ ë‹¤ë¥¸ HD ì§€ê°‘ì„ ì›í™œí•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ë”°ë¼ì„œ ì‚¬ìš©ìëŠ” ì „ìš© ì„¸ê·¸ìœ— ê³„ì •ì„ ìƒì„±í•´ì•¼ í•˜ê³ , ì´ BIPì™€ í˜¸í™˜ë˜ëŠ” ì§€ê°‘ë§Œì´ ê³„ì •ì„ ê°ì§€í•˜ê³  ì ì ˆíˆ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤.

<br>

### ê³ ë ¤ì‚¬í•­

[BIP-49](https://github.com/bitcoin/bips/blob/master/bip-0049.mediawiki)ì˜ "ê³ ë ¤ì‚¬í•­(considerations)" ì¥ì— ì„¤ëª…í•œ ê·¼ê±°ë¥¼ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•œë‹¤.

<br>

## ëª…ì„¸

ì´ BIPëŠ” [BIP-32](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki) ë£¨íŠ¸ ê³„ì •ì„ ê¸°ë°˜ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ ê²°ì •ì  ì£¼ì†Œë¥¼ ë„ì¶œí•˜ëŠ”ë° í•„ìš”í•œ ë‘ ë‹¨ê³„ë¥¼ ì •ì˜í•œë‹¤.

<br>

### ê³µê°œ í‚¤ ë„ì¶œ

ë£¨íŠ¸ ê³„ì •ì—ì„œ ê³µê°œí‚¤ë¥¼ ë„ì¶œí•˜ê¸° ìœ„í•´ ì´ BIPì—ì„œëŠ” [BIP-44](https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki)ì™€ [BIP-49](https://github.com/bitcoin/bips/blob/master/bip-0049.mediawiki)ì— ì •ì˜ëœ ê²ƒê³¼ ë™ì¼í•œ ê³„ì • êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ ë‹¤ë¥¸ íŠ¸ëœì­ì…˜ ì§ë ¬í™” ë°©ë²•ì„ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ ë‹¤ë¥¸ ëª©ì  ê°’ì„ ì‚¬ìš©í•œë‹¤.

```
m / purpose' / coin_type' / account' / change / address_index
```

<br>

ëª©ì  ê²½ë¡œ ë ˆë²¨ì˜ ê²½ìš° 84â€™ë¥¼ ì‚¬ìš©í•œë‹¤. ë‚˜ë¨¸ì§€ ë ˆë²¨ì€ [BIP-44](https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki) ë˜ëŠ” [BIP-49](https://github.com/bitcoin/bips/blob/master/bip-0049.mediawiki)ì— ì •ì˜ëœ ëŒ€ë¡œ ì‚¬ìš©í•œë‹¤.

<br>

### ê³„ì • íŒŒìƒ

ìœ„ì—ì„œ ê³„ì‚°ëœ ê³µê°œí‚¤ë¡œë¶€í„° P2WPKH ì£¼ì†Œë¥¼ ë„ì¶œí•˜ê¸° ìœ„í•´ [BIP-141](https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki#p2wpkh)ì— ì •ì˜ëœ ìº¡ìŠí™”ë¥¼ ì‚¬ìš©í•œë‹¤.

```
ì¦ì¸ (witness):                <ì„œëª… (signature)> <ê³µê°œí‚¤ (pubkey)>
ìŠ¤í¬ë¦½íŠ¸ ì„œëª… (scriptSig):       (ê³µë€ (empty))
ìŠ¤í¬ë¦½íŠ¸ ê³µê°œí‚¤ (scriptPubKey):   0 <20-byte-key-hash>
                              (0x0014{20-byte-key-hash})
```

<br>

### í™•ì¥ í‚¤ ë²„ì „

ì´ ì²´ê³„ëŠ” í™•ì¥ í‚¤ë¥¼ ì§ë ¬í™”í•  ë•Œ ëŒ€ì²´ ë²„ì „ ë°”ì´íŠ¸ë¥¼ ì‚¬ìš©í•œë‹¤. í™•ì¥ ê³µê°œí‚¤ëŠ” 0x04b24746ì„ ì‚¬ìš©í•˜ì—¬ â€œzpubâ€ ì ‘ë‘ì‚¬ë¥¼ ìƒì„±í•˜ê³ , ê°œì¸í‚¤ëŠ” 0x04b2430cë¥¼ ì‚¬ìš©í•˜ì—¬ â€œzprvâ€ ì ‘ë‘ì‚¬ë¥¼ ìƒì„±í•œë‹¤. í…ŒìŠ¤íŠ¸ë„·ì€ 0x045f1cf6 (â€œvpubâ€) ë° 0x045f18bc (â€œvprvâ€)ë¥¼ ì‚¬ìš©í•œë‹¤.

ì¶”ê°€ë¡œ ë“±ë¡ëœ ë²„ì „ ë°”ì´íŠ¸ëŠ” [SLIP-0132](https://github.com/satoshilabs/slips/blob/master/slip-0132.md)ì— ë‚˜ì—´ë˜ì–´ ìˆë‹¤.

<br>

## ì´ì „ ë²„ì „ê³¼ì˜ í˜¸í™˜ì„±

ì´ BIPëŠ” [ê³ ë ¤ì‚¬í•­](#ê³ ë ¤ì‚¬í•­) ì¥ì— ì„¤ëª…í•œ ëŒ€ë¡œ ì„¤ê³„ìƒ ì´ì „ ë²„ì „ê³¼ í˜¸í™˜ë˜ì§€ ì•ŠëŠ”ë‹¤. í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ì§€ê°‘ì€ ê³„ì •ì„ ì „í˜€ ê²€ìƒ‰í•˜ì§€ ëª»í•˜ë©°, ì‚¬ìš©ìëŠ” ë¬¸ì œê°€ ìˆìŒì„ ì¸ì§€í•  ìˆ˜ ìˆë‹¤.

<br>

## í…ŒìŠ¤íŠ¸ ë²¡í„°

```
ë‹ˆëª¨ë‹‰ (mnemonic) = abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about

ë£¨íŠ¸ ê°œì¸í‚¤ (rootpriv) = zprvAWgYBBk7JR8Gjrh4UJQ2uJdG1r3WNRRfURiABBE3RvMXYSrRJL62XuezvGdPvG6GFBZduosCc1YP5wixPox7zhZLfiUm8aunE96BBa4Kei5

ë£¨íŠ¸ ê³µê°œí‚¤ (rootpub) = zpub6jftahH18ngZxLmXaKw3GSZzZsszmt9WqedkyZdezFtWRFBZqsQH5hyUmb4pCEeZGmVfQuP5bedXTB8is6fTv19U1GQRyQUKQGUTzyHACMF

// ê³„ì • #0, ë£¨íŠ¸ (root) = m/84'/0'/0'
í™•ì¥ ê°œì¸í‚¤ (xpriv) = zprvAdG4iTXWBoARxkkzNpNh8r6Qag3irQB8PzEMkAFeTRXxHpbF9z4QgEvBRmfvqWvGp42t42nvgGpNgYSJA9iefm1yYNZKEm7z6qUWCroSQnE

í™•ì¥ ê³µê°œí‚¤ (xpub) = zpub6rFR7y4Q2AijBEqTUquhVz398htDFrtymD9xYYfG1m4wAcvPhXNfE3EfH1r1ADqtfSdVCToUG868RvUUkgDKf31mGDtKsAYz2oz2AGutZYs

// ê³„ì • #0, ì²« ë²ˆì§¸ ìˆ˜ì‹  ì£¼ì†Œ (first receiving address) = m/84'/0'/0'/0/0
ê°œì¸í‚¤ (privkey) = KyZpNDKnfs94vbrwhJneDi77V6jF64PWPF8x5cdJb8ifgg2DUc9d

ê³µê°œí‚¤ (pubkey) = 0330d54fd0dd420a6e5f8d3624f5f3482cae350f79d5f0753bf5beef9c2d91af3c

ì£¼ì†Œ (address) = bc1qcr8te4kr609gcawutmrza0j4xv80jy8z306fyu

// ê³„ì • #0, ë‘ ë²ˆì§¸ ìˆ˜ì‹  ì£¼ì†Œ = m/84'/0'/0'/0/1
ê°œì¸í‚¤ (privkey) = Kxpf5b8p3qX56DKEe5NqWbNUP9MnqoRFzZwHRtsFqhzuvUJsYZCy

ê³µê°œí‚¤ (pubkey) = 03e775fd51f0dfb8cd865d9ff1cca2a158cf651fe997fdc9fee9c1d3b5e995ea77

ì£¼ì†Œ (address) = bc1qnjg0jd8228aq7egyzacy8cys3knf9xvrerkf9g

// ê³„ì • #0, ì²« ë²ˆì§¸ ë³€ê²½ ì£¼ì†Œ = m/84'/0'/0'/1/0
ê°œì¸í‚¤ (privkey) = KxuoxufJL5csa1Wieb2kp29VNdn92Us8CoaUG3aGtPtcF3AzeXvF

ê³µê°œí‚¤ (pubkey) = 03025324888e429ab8e3dbaf1f7802648b9cd01e9b418485c5fa4c1b9b5700e1a6

ì£¼ì†Œ (address) = bc1q8c6fshw2dlwun7ekn9qwf37cu2rn755upcp6el
```

<br>

## ì°¸ê³ ìë£Œ

- [BIP32 - Hierarchical Deterministic Wallets](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki)

- [BIP43 - Purpose Field for Deterministic Wallets](https://github.com/bitcoin/bips/blob/master/bip-0043.mediawiki)

- [BIP44 - Multi-Account Hierarchy for Deterministic Wallets](https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki)

- [BIP49 - Derivation scheme for P2WPKH-nested-in-P2SH based accounts](https://github.com/bitcoin/bips/blob/master/bip-0049.mediawiki)

- [BIP141 - Segregated Witness (Consensus layer)](https://github.com/bitcoin/bips/blob/master/bip-0141.mediawiki)

- [BIP173 - Base32 address format for native v0-16 witness outputs](https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki) 